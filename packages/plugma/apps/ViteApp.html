<style rel="stylesheet" crossorigin>#plugma-status.svelte-1r1fta9{z-index:999999;position:absolute;top:0;bottom:0;right:0;left:0;padding:16px;background-color:var(--figma-color-bg)}.panel.svelte-1r1fta9{display:flex;background-color:var(--figma-color-bg-brand-tertiary);border:1px solid var(--figma-color-border);padding:8px;border-radius:4px;color:var(--figma-color-text);font-family:Inter,system-ui,Helvetica,Arial,sans-serif;font-display:optional;font-size:12px;box-sizing:border-box;justify-content:center;align-items:center;height:100%}.server-not-active.svelte-1r1fta9{display:flex;gap:4px;align-items:center}.Toolbar.svelte-ktigax{background-color:var(--figma-color-bg-brand-tertiary);position:fixed;display:flex;left:0;right:0;bottom:0;z-index:9999;padding:8px;border-top:1px solid var(--figma-color-border)}.Button.svelte-ktigax{flex-grow:0;position:relative;width:24px;height:24px;border-radius:4px;border:none;padding:0;background-color:transparent;color:inherit}svg.svelte-ktigax{flex-grow:0}.Button.svelte-ktigax:hover:after{display:block;content:"";background-color:var(--figma-color-bg-inverse);opacity:.08;width:100%;height:100%;position:absolute;top:0;left:0;right:0;bottom:0;z-index:1;border-radius:4px}.spacer.svelte-ktigax{flex-grow:1}
</style>
<script type="module" crossorigin>var qe=Object.defineProperty;var Ke=(n,e,t)=>e in n?qe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var le=(n,e,t)=>Ke(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=t(o);fetch(o.href,i)}})();function v(){}function Pe(n){return n()}function Ee(){return Object.create(null)}function K(n){n.forEach(Pe)}function Re(n){return typeof n=="function"}function re(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}function He(n){return Object.keys(n).length===0}function Qe(n,...e){if(n==null){for(const r of e)r(void 0);return v}const t=n.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function je(n,e,t){n.$$.on_destroy.push(Qe(e,t))}function w(n,e){n.appendChild(e)}function S(n,e,t){n.insertBefore(e,t||null)}function E(n){n.parentNode&&n.parentNode.removeChild(n)}function N(n){return document.createElement(n)}function C(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function _e(n){return document.createTextNode(n)}function te(){return _e(" ")}function ye(){return _e("")}function ze(n,e,t,r){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}function l(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function Je(n){return Array.from(n.childNodes)}function Xe(n,e){e=""+e,n.data!==e&&(n.data=e)}let Y;function V(n){Y=n}function Ze(){if(!Y)throw new Error("Function called outside component initialization");return Y}function et(n){Ze().$$.on_mount.push(n)}const B=[],Ce=[];let D=[];const Se=[],Be=Promise.resolve();let fe=!1;function De(){fe||(fe=!0,Be.then(We))}function ce(){return De(),Be}function de(n){D.push(n)}const ue=new Set;let P=0;function We(){if(P!==0)return;const n=Y;do{try{for(;P<B.length;){const e=B[P];P++,V(e),tt(e.$$)}}catch(e){throw B.length=0,P=0,e}for(V(null),B.length=0,P=0;Ce.length;)Ce.pop()();for(let e=0;e<D.length;e+=1){const t=D[e];ue.has(t)||(ue.add(t),t())}D.length=0}while(B.length);for(;Se.length;)Se.pop()();fe=!1,ue.clear(),V(n)}function tt(n){if(n.fragment!==null){n.update(),K(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(de)}}function nt(n){const e=[],t=[];D.forEach(r=>n.indexOf(r)===-1?e.push(r):t.push(r)),t.forEach(r=>r()),D=e}const X=new Set;let I;function Fe(){I={r:0,c:[],p:I}}function Ge(){I.r||K(I.c),I=I.p}function O(n,e){n&&n.i&&(X.delete(n),n.i(e))}function $(n,e,t,r){if(n&&n.o){if(X.has(n))return;X.add(n),I.c.push(()=>{X.delete(n),r&&(t&&n.d(1),r())}),n.o(e)}else r&&r()}function H(n){n&&n.c()}function G(n,e,t){const{fragment:r,after_update:o}=n.$$;r&&r.m(e,t),de(()=>{const i=n.$$.on_mount.map(Pe).filter(Re);n.$$.on_destroy?n.$$.on_destroy.push(...i):K(i),n.$$.on_mount=[]}),o.forEach(de)}function U(n,e){const t=n.$$;t.fragment!==null&&(nt(t.after_update),K(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function rt(n,e){n.$$.dirty[0]===-1&&(B.push(n),De(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function be(n,e,t,r,o,i,s=null,d=[-1]){const c=Y;V(n);const a=n.$$={fragment:null,ctx:[],props:i,update:v,not_equal:o,bound:Ee(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:Ee(),dirty:d,skip_bound:!1,root:e.target||c.$$.root};s&&s(a.root);let h=!1;if(a.ctx=t?t(n,e.props||{},(_,g,...f)=>{const u=f.length?f[0]:g;return a.ctx&&o(a.ctx[_],a.ctx[_]=u)&&(!a.skip_bound&&a.bound[_]&&a.bound[_](u),h&&rt(n,_)),g}):[],a.update(),h=!0,K(a.before_update),a.fragment=r?r(a.ctx):!1,e.target){if(e.hydrate){const _=Je(e.target);a.fragment&&a.fragment.l(_),_.forEach(E)}else a.fragment&&a.fragment.c();e.intro&&O(n.$$.fragment),G(n,e.target,e.anchor),We()}V(c)}class we{constructor(){le(this,"$$");le(this,"$$set")}$destroy(){U(this,1),this.$destroy=v}$on(e,t){if(!Re(t))return v;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(t),()=>{const o=r.indexOf(t);o!==-1&&r.splice(o,1)}}$set(e){this.$$set&&!He(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const ot="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(ot);let it=(n=21)=>crypto.getRandomValues(new Uint8Array(n)).reduce((e,t)=>(t&=63,t<36?e+=t.toString(36):t<62?e+=(t-26).toString(36).toUpperCase():t>62?e+="-":e+="_",e),"");function st(n,e,t){let r=1e3,o=!0;async function i(){const s=document.getElementById("app");try{const d=await fetch(n);d.ok&&!o?(o=!0,s&&(s.style.display="block"),await ce(),t(o)):!d.ok&&o&&(o=!1,s.style.display="none",await ce(),t(o))}catch{o&&(o=!1,s&&(s.style.display="none"),await ce(),t(o))}}t(o),i(),setInterval(i,r)}function lt(n){let e;return{c(){e=N("p"),e.textContent="Dev server inactive"},m(t,r){S(t,e,r)},p:v,d(t){t&&E(e)}}}function ct(n){let e;return{c(){e=_e(n[0])},m(t,r){S(t,e,r)},p(t,r){r&1&&Xe(e,t[0])},d(t){t&&E(e)}}}function ut(n){let e,t,r,o,i,s;function d(h,_){return h[0]?ct:lt}let c=d(n),a=c(n);return{c(){e=N("div"),t=N("div"),r=N("div"),o=C("svg"),i=C("path"),s=te(),a.c(),l(i,"fill-rule","evenodd"),l(i,"clip-rule","evenodd"),l(i,"d","M15.3463 8.16209C15.633 7.65235 16.3669 7.65235 16.6536 8.16209L24.3713 21.8823C24.6525 22.3822 24.2912 23 23.7176 23H8.28234C7.70872 23 7.34744 22.3822 7.62866 21.8823L15.3463 8.16209ZM16 12.3817C16.497 12.3817 16.9 12.7847 16.9 13.2817V16.3695C16.9 16.8666 16.497 17.2695 16 17.2695C15.5029 17.2695 15.1 16.8666 15.1 16.3695V13.2817C15.1 12.7847 15.5029 12.3817 16 12.3817ZM17.1 20C17.1 19.3925 16.6075 18.9 16 18.9C15.3924 18.9 14.9 19.3925 14.9 20V20.0685C14.9 20.6761 15.3924 21.1685 16 21.1685C16.6075 21.1685 17.1 20.6761 17.1 20.0685V20Z"),l(i,"fill","currentColor"),l(i,"fill-opacity","0.8"),l(o,"width","32"),l(o,"height","32"),l(o,"viewBox","0 0 32 32"),l(o,"fill","none"),l(o,"xmlns","http://www.w3.org/2000/svg"),l(r,"class","server-not-active svelte-1r1fta9"),l(t,"class","panel svelte-1r1fta9"),l(e,"id","plugma-status"),l(e,"class","container svelte-1r1fta9")},m(h,_){S(h,e,_),w(e,t),w(t,r),w(r,o),w(o,i),w(r,s),a.m(r,null)},p(h,[_]){c===(c=d(h))&&a?a.p(h,_):(a.d(1),a=c(h),a&&(a.c(),a.m(r,null)))},i:v,o:v,d(h){h&&E(e),a.d()}}}function at(n,e,t){let{message:r=null}=e;return n.$$set=o=>{"message"in o&&t(0,r=o.message)},[r]}class oe extends we{constructor(e){super(),be(this,e,at,ut,re,{message:0})}}const R=[];function ve(n,e=v){let t;const r=new Set;function o(d){if(re(n,d)&&(n=d,t)){const c=!R.length;for(const a of r)a[1](),R.push(a,n);if(c){for(let a=0;a<R.length;a+=2)R[a][0](R[a+1]);R.length=0}}}function i(d){o(d(n))}function s(d,c=v){const a=[d,c];return r.add(a),r.size===1&&(t=e(o,i)||v),d(n),()=>{r.delete(a),r.size===0&&t&&(t(),t=null)}}return{set:o,update:i,subscribe:s}}const ke=ve(!1),Z=ve([]),ee=ve([]),ae=10,Oe=(n=0)=>e=>`\x1B[${e+n}m`,xe=(n=0)=>e=>`\x1B[${38+n};5;${e}m`,$e=(n=0)=>(e,t,r)=>`\x1B[${38+n};2;${e};${t};${r}m`,m={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};Object.keys(m.modifier);const ft=Object.keys(m.color),dt=Object.keys(m.bgColor);[...ft,...dt];function ht(){const n=new Map;for(const[e,t]of Object.entries(m)){for(const[r,o]of Object.entries(t))m[r]={open:`\x1B[${o[0]}m`,close:`\x1B[${o[1]}m`},t[r]=m[r],n.set(o[0],o[1]);Object.defineProperty(m,e,{value:t,enumerable:!1})}return Object.defineProperty(m,"codes",{value:n,enumerable:!1}),m.color.close="\x1B[39m",m.bgColor.close="\x1B[49m",m.color.ansi=Oe(),m.color.ansi256=xe(),m.color.ansi16m=$e(),m.bgColor.ansi=Oe(ae),m.bgColor.ansi256=xe(ae),m.bgColor.ansi16m=$e(ae),Object.defineProperties(m,{rgbToAnsi256:{value(e,t,r){return e===t&&t===r?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(t/255*5)+Math.round(r/255*5)},enumerable:!1},hexToRgb:{value(e){const t=/[a-f\d]{6}|[a-f\d]{3}/i.exec(e.toString(16));if(!t)return[0,0,0];let[r]=t;r.length===3&&(r=[...r].map(i=>i+i).join(""));const o=Number.parseInt(r,16);return[o>>16&255,o>>8&255,o&255]},enumerable:!1},hexToAnsi256:{value:e=>m.rgbToAnsi256(...m.hexToRgb(e)),enumerable:!1},ansi256ToAnsi:{value(e){if(e<8)return 30+e;if(e<16)return 90+(e-8);let t,r,o;if(e>=232)t=((e-232)*10+8)/255,r=t,o=t;else{e-=16;const d=e%36;t=Math.floor(e/36)/5,r=Math.floor(d/6)/5,o=d%6/5}const i=Math.max(t,r,o)*2;if(i===0)return 30;let s=30+(Math.round(o)<<2|Math.round(r)<<1|Math.round(t));return i===2&&(s+=60),s},enumerable:!1},rgbToAnsi:{value:(e,t,r)=>m.ansi256ToAnsi(m.rgbToAnsi256(e,t,r)),enumerable:!1},hexToAnsi:{value:e=>m.ansi256ToAnsi(m.hexToAnsi256(e)),enumerable:!1}}),m}const x=ht(),z=(()=>{if(navigator.userAgentData){const n=navigator.userAgentData.brands.find(({brand:e})=>e==="Chromium");if(n&&n.version>93)return 3}return/\b(Chrome|Chromium)\//.test(navigator.userAgent)?1:0})(),Me=z!==0&&{level:z,hasBasic:!0,has256:z>=2,has16m:z>=3},pt={stdout:Me,stderr:Me};function gt(n,e,t){let r=n.indexOf(e);if(r===-1)return n;const o=e.length;let i=0,s="";do s+=n.slice(i,r)+e+t,i=r+o,r=n.indexOf(e,i);while(r!==-1);return s+=n.slice(i),s}function mt(n,e,t,r){let o=0,i="";do{const s=n[r-1]==="\r";i+=n.slice(o,s?r-1:r)+e+(s?`\r
`:`
`)+t,o=r+1,r=n.indexOf(`
`,o)}while(r!==-1);return i+=n.slice(o),i}const{stdout:Le,stderr:Te}=pt,he=Symbol("GENERATOR"),W=Symbol("STYLER"),q=Symbol("IS_EMPTY"),Ie=["ansi","ansi","ansi256","ansi16m"],F=Object.create(null),_t=(n,e={})=>{if(e.level&&!(Number.isInteger(e.level)&&e.level>=0&&e.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");const t=Le?Le.level:0;n.level=e.level===void 0?t:e.level},yt=n=>{const e=(...t)=>t.join(" ");return _t(e,n),Object.setPrototypeOf(e,Q.prototype),e};function Q(n){return yt(n)}Object.setPrototypeOf(Q.prototype,Function.prototype);for(const[n,e]of Object.entries(x))F[n]={get(){const t=ne(this,ge(e.open,e.close,this[W]),this[q]);return Object.defineProperty(this,n,{value:t}),t}};F.visible={get(){const n=ne(this,this[W],!0);return Object.defineProperty(this,"visible",{value:n}),n}};const pe=(n,e,t,...r)=>n==="rgb"?e==="ansi16m"?x[t].ansi16m(...r):e==="ansi256"?x[t].ansi256(x.rgbToAnsi256(...r)):x[t].ansi(x.rgbToAnsi(...r)):n==="hex"?pe("rgb",e,t,...x.hexToRgb(...r)):x[t][n](...r),bt=["rgb","hex","ansi256"];for(const n of bt){F[n]={get(){const{level:t}=this;return function(...r){const o=ge(pe(n,Ie[t],"color",...r),x.color.close,this[W]);return ne(this,o,this[q])}}};const e="bg"+n[0].toUpperCase()+n.slice(1);F[e]={get(){const{level:t}=this;return function(...r){const o=ge(pe(n,Ie[t],"bgColor",...r),x.bgColor.close,this[W]);return ne(this,o,this[q])}}}}const wt=Object.defineProperties(()=>{},{...F,level:{enumerable:!0,get(){return this[he].level},set(n){this[he].level=n}}}),ge=(n,e,t)=>{let r,o;return t===void 0?(r=n,o=e):(r=t.openAll+n,o=e+t.closeAll),{open:n,close:e,openAll:r,closeAll:o,parent:t}},ne=(n,e,t)=>{const r=(...o)=>vt(r,o.length===1?""+o[0]:o.join(" "));return Object.setPrototypeOf(r,wt),r[he]=n,r[W]=e,r[q]=t,r},vt=(n,e)=>{if(n.level<=0||!e)return n[q]?"":e;let t=n[W];if(t===void 0)return e;const{openAll:r,closeAll:o}=t;if(e.includes("\x1B"))for(;t!==void 0;)e=gt(e,t.close,t.open),t=t.parent;const i=e.indexOf(`
`);return i!==-1&&(e=mt(e,o,r,i)),r+e+o};Object.defineProperties(Q.prototype,F);const J=Q();Q({level:Te?Te.level:0});class Ue{constructor(e={}){this.options={defaultIndentLevel:0,showTimestamp:!1,timestampFormat:"YYYY-MM-DD HH:mm:ss",debug:!1,...e},this.isProd=!0,this.currentIndent=this.options.defaultIndentLevel,this.currentType=null,this.forceLog=!1}format(e={}){return this.currentIndent=e.indent||this.options.defaultIndentLevel,this}log(e,t=null,r=!1){if(!this.options.debug&&this.isProd&&!r)return;const i=[this.formatLog(e[0],this.currentIndent,t),...e.slice(1)];if(this.options.showTimestamp){const s=new Date().toISOString();console.log(`[${s}]`,...i)}else console.log(...i);this.resetFormatting()}text(...e){return this.log(e,null,!0),this}info(...e){return this.log(e,"info"),this}success(...e){return this.log(e,"success"),this}error(...e){return this.log(e,"error",!0),this}warn(...e){return this.log(e,"warning",!0),this}formatLog(e,t=0,r){const o=" ".repeat(t*2),i=this.getPrefix(r);return`${o}${i}${e}`}resetFormatting(){this.currentIndent=this.options.defaultIndentLevel,this.currentType=null}getPrefix(e){switch(e){case"info":return J.blue.bold("INFO: ");case"success":return J.green.bold("SUCCESS: ");case"error":return J.red.bold("ERROR: ");case"warning":return J.yellow.bold("WARNING: ");default:return""}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var me=function(n,e){return me=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o])},me(n,e)};function Ve(n,e){me(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function Et(n){var e=typeof Symbol=="function"&&n[Symbol.iterator],t=0;return e?e.call(n):{next:function(){return n&&t>=n.length&&(n=void 0),{value:n&&n[t++],done:!n}}}}function Ct(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),o,i=[],s;try{for(;(e===void 0||e-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(d){s={error:d}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(s)throw s.error}}return i}function St(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(Ct(arguments[e]));return n}var Ye=function(){function n(e,t){this.target=t,this.type=e}return n}(),kt=function(n){Ve(e,n);function e(t,r){var o=n.call(this,"error",r)||this;return o.message=t.message,o.error=t,o}return e}(Ye),Ot=function(n){Ve(e,n);function e(t,r,o){t===void 0&&(t=1e3),r===void 0&&(r="");var i=n.call(this,"close",o)||this;return i.wasClean=!0,i.code=t,i.reason=r,i}return e}(Ye);/*!
 * Reconnecting WebSocket
 * by Pedro Ladaria <pedro.ladaria@gmail.com>
 * https://github.com/pladaria/reconnecting-websocket
 * License MIT
 */var xt=function(){if(typeof WebSocket<"u")return WebSocket},$t=function(n){return typeof n<"u"&&!!n&&n.CLOSING===2},T={maxReconnectionDelay:1e4,minReconnectionDelay:1e3+Math.random()*4e3,minUptime:5e3,reconnectionDelayGrowFactor:1.3,connectionTimeout:4e3,maxRetries:1/0,maxEnqueuedMessages:1/0,startClosed:!1,debug:!1},Mt=function(){function n(e,t,r){var o=this;r===void 0&&(r={}),this._listeners={error:[],message:[],open:[],close:[]},this._retryCount=-1,this._shouldReconnect=!0,this._connectLock=!1,this._binaryType="blob",this._closeCalled=!1,this._messageQueue=[],this.onclose=null,this.onerror=null,this.onmessage=null,this.onopen=null,this._handleOpen=function(i){o._debug("open event");var s=o._options.minUptime,d=s===void 0?T.minUptime:s;clearTimeout(o._connectTimeout),o._uptimeTimeout=setTimeout(function(){return o._acceptOpen()},d),o._ws.binaryType=o._binaryType,o._messageQueue.forEach(function(c){return o._ws.send(c)}),o._messageQueue=[],o.onopen&&o.onopen(i),o._listeners.open.forEach(function(c){return o._callEventListener(i,c)})},this._handleMessage=function(i){o._debug("message event"),o.onmessage&&o.onmessage(i),o._listeners.message.forEach(function(s){return o._callEventListener(i,s)})},this._handleError=function(i){o._debug("error event",i.message),o._disconnect(void 0,i.message==="TIMEOUT"?"timeout":void 0),o.onerror&&o.onerror(i),o._debug("exec error listeners"),o._listeners.error.forEach(function(s){return o._callEventListener(i,s)}),o._connect()},this._handleClose=function(i){o._debug("close event"),o._clearTimeouts(),o._shouldReconnect&&o._connect(),o.onclose&&o.onclose(i),o._listeners.close.forEach(function(s){return o._callEventListener(i,s)})},this._url=e,this._protocols=t,this._options=r,this._options.startClosed&&(this._shouldReconnect=!1),this._connect()}return Object.defineProperty(n,"CONNECTING",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(n,"OPEN",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(n,"CLOSING",{get:function(){return 2},enumerable:!0,configurable:!0}),Object.defineProperty(n,"CLOSED",{get:function(){return 3},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CONNECTING",{get:function(){return n.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"OPEN",{get:function(){return n.OPEN},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CLOSING",{get:function(){return n.CLOSING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CLOSED",{get:function(){return n.CLOSED},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"binaryType",{get:function(){return this._ws?this._ws.binaryType:this._binaryType},set:function(e){this._binaryType=e,this._ws&&(this._ws.binaryType=e)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"retryCount",{get:function(){return Math.max(this._retryCount,0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bufferedAmount",{get:function(){var e=this._messageQueue.reduce(function(t,r){return typeof r=="string"?t+=r.length:r instanceof Blob?t+=r.size:t+=r.byteLength,t},0);return e+(this._ws?this._ws.bufferedAmount:0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"extensions",{get:function(){return this._ws?this._ws.extensions:""},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"protocol",{get:function(){return this._ws?this._ws.protocol:""},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"readyState",{get:function(){return this._ws?this._ws.readyState:this._options.startClosed?n.CLOSED:n.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"url",{get:function(){return this._ws?this._ws.url:""},enumerable:!0,configurable:!0}),n.prototype.close=function(e,t){if(e===void 0&&(e=1e3),this._closeCalled=!0,this._shouldReconnect=!1,this._clearTimeouts(),!this._ws){this._debug("close enqueued: no ws instance");return}if(this._ws.readyState===this.CLOSED){this._debug("close: already closed");return}this._ws.close(e,t)},n.prototype.reconnect=function(e,t){this._shouldReconnect=!0,this._closeCalled=!1,this._retryCount=-1,!this._ws||this._ws.readyState===this.CLOSED?this._connect():(this._disconnect(e,t),this._connect())},n.prototype.send=function(e){if(this._ws&&this._ws.readyState===this.OPEN)this._debug("send",e),this._ws.send(e);else{var t=this._options.maxEnqueuedMessages,r=t===void 0?T.maxEnqueuedMessages:t;this._messageQueue.length<r&&(this._debug("enqueue",e),this._messageQueue.push(e))}},n.prototype.addEventListener=function(e,t){this._listeners[e]&&this._listeners[e].push(t)},n.prototype.dispatchEvent=function(e){var t,r,o=this._listeners[e.type];if(o)try{for(var i=Et(o),s=i.next();!s.done;s=i.next()){var d=s.value;this._callEventListener(e,d)}}catch(c){t={error:c}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return!0},n.prototype.removeEventListener=function(e,t){this._listeners[e]&&(this._listeners[e]=this._listeners[e].filter(function(r){return r!==t}))},n.prototype._debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._options.debug&&console.log.apply(console,St(["RWS>"],e))},n.prototype._getNextDelay=function(){var e=this._options,t=e.reconnectionDelayGrowFactor,r=t===void 0?T.reconnectionDelayGrowFactor:t,o=e.minReconnectionDelay,i=o===void 0?T.minReconnectionDelay:o,s=e.maxReconnectionDelay,d=s===void 0?T.maxReconnectionDelay:s,c=0;return this._retryCount>0&&(c=i*Math.pow(r,this._retryCount-1),c>d&&(c=d)),this._debug("next delay",c),c},n.prototype._wait=function(){var e=this;return new Promise(function(t){setTimeout(t,e._getNextDelay())})},n.prototype._getNextUrl=function(e){if(typeof e=="string")return Promise.resolve(e);if(typeof e=="function"){var t=e();if(typeof t=="string")return Promise.resolve(t);if(t.then)return t}throw Error("Invalid URL")},n.prototype._connect=function(){var e=this;if(!(this._connectLock||!this._shouldReconnect)){this._connectLock=!0;var t=this._options,r=t.maxRetries,o=r===void 0?T.maxRetries:r,i=t.connectionTimeout,s=i===void 0?T.connectionTimeout:i,d=t.WebSocket,c=d===void 0?xt():d;if(this._retryCount>=o){this._debug("max retries reached",this._retryCount,">=",o);return}if(this._retryCount++,this._debug("connect",this._retryCount),this._removeListeners(),!$t(c))throw Error("No valid WebSocket class provided");this._wait().then(function(){return e._getNextUrl(e._url)}).then(function(a){e._closeCalled||(e._debug("connect",{url:a,protocols:e._protocols}),e._ws=e._protocols?new c(a,e._protocols):new c(a),e._ws.binaryType=e._binaryType,e._connectLock=!1,e._addListeners(),e._connectTimeout=setTimeout(function(){return e._handleTimeout()},s))})}},n.prototype._handleTimeout=function(){this._debug("timeout event"),this._handleError(new kt(Error("TIMEOUT"),this))},n.prototype._disconnect=function(e,t){if(e===void 0&&(e=1e3),this._clearTimeouts(),!!this._ws){this._removeListeners();try{this._ws.close(e,t),this._handleClose(new Ot(e,t,this))}catch{}}},n.prototype._acceptOpen=function(){this._debug("accept open"),this._retryCount=0},n.prototype._callEventListener=function(e,t){"handleEvent"in t?t.handleEvent(e):t(e)},n.prototype._removeListeners=function(){this._ws&&(this._debug("removeListeners"),this._ws.removeEventListener("open",this._handleOpen),this._ws.removeEventListener("close",this._handleClose),this._ws.removeEventListener("message",this._handleMessage),this._ws.removeEventListener("error",this._handleError))},n.prototype._addListeners=function(){this._ws&&(this._debug("addListeners"),this._ws.addEventListener("open",this._handleOpen),this._ws.addEventListener("close",this._handleClose),this._ws.addEventListener("message",this._handleMessage),this._ws.addEventListener("error",this._handleError))},n.prototype._clearTimeouts=function(){clearTimeout(this._connectTimeout),clearTimeout(this._uptimeTimeout)},n}();const j=new Ue({debug:window.runtimeData.debug}),Ne=window.self!==window.top,Ae=typeof figma<"u";function Lt(n=null,e=!0,t=!1){const r=[];let o=[],i=[],s;const d={send:f=>{console.warn("WebSocket is disabled, cannot send data:",f)},post:(f,u)=>{Array.isArray(f)?f.forEach(p=>c(p,u)):c(f,u)},on:(f,u)=>{Array.isArray(u)?u.forEach(p=>h(p,f)):h(u,f)},open:f=>{},close:f=>{console.warn("WebSocket is disabled, no connection to close."),f&&f()},addEventListener:(f,u)=>{},removeEventListener:(f,u)=>{},onmessage:null,onopen:null,onclose:null,onerror:null};function c(f,u){Array.isArray(u)?u.forEach(p=>a(p,f)):a(u,f)}function a(f,u){j.info(`--- ws post, ${f}`,u),f==="iframe"&&n&&n.contentWindow.postMessage?n.contentWindow.postMessage(u,"*"):f==="parent"&&window.parent?window.parent.postMessage(u,"*"):f==="ws"?e&&(!g||g.readyState!==WebSocket.OPEN?(console.warn("WebSocket is disabled or not open, queuing message:",u),r.push({message:u,via:f})):g.send(JSON.stringify(u))):console.warn(`Cannot send message via ${f}.`)}function h(f,u){f==="window"?window.addEventListener("message",u):f==="parent"&&window.parent?window.addEventListener("message",p=>{p.source===window.parent&&u(p)}):f==="ws"&&e?g.addEventListener("message",p=>{try{const y=JSON.parse(p.data),k={...p,data:y};u(k)}catch(y){console.error("Failed to parse WebSocket message data:",y),u(p)}}):console.warn(`Cannot add message listener via ${f}.`)}if(!e||!("WebSocket"in window))return d;let _="";console.log("is inside figma",Ne,Ae),t&&(Ne||Ae?_="?source=plugin-window":_="?source=browser");let g=new Mt(`ws://localhost:9001/ws${_}`);return g.post=(f,u=["ws"])=>{Array.isArray(f)?f.forEach(p=>c(p,u)):c(f,u)},g.on=(f,u=["ws"])=>{Array.isArray(u)?u.forEach(p=>h(p,f)):h(u,f)},g.open=f=>{o.push(f),g.readyState===WebSocket.OPEN&&f()},g.close=f=>{i.push(f),g.readyState===WebSocket.OPEN?(g.addEventListener("close",()=>{clearInterval(s),i.forEach(u=>u&&u())}),g.close()):(j.info("WebSocket is not open, nothing to close."),f&&f())},e&&(g.onopen=()=>{for(o.forEach(f=>f());r.length>0;){const{message:f,via:u}=r.shift();c(f,u)}ke.set(!0),s=window.setInterval(()=>{g.readyState===WebSocket.OPEN&&g.send(JSON.stringify({pluginMessage:{event:"ping"},pluginId:"*"}))},1e4)},g.onmessage=f=>{try{if(j.info("Received raw WebSocket message:",f.data),!f.data){j.warn("Received empty message");return}let u;try{u=JSON.parse(f.data)}catch{j.warn("Failed to parse WebSocket message:",f.data);return}if(u.pluginMessage){if(u.pluginMessage.event==="ping"&&g.send(JSON.stringify({pluginMessage:{event:"pong"},pluginId:"*"})),u.pluginMessage.event==="client_list"){const p=u.pluginMessage.clients||[],y=p.filter(b=>b.source==="browser"),k=p.filter(b=>b.source==="plugin-window");Z.set(y),ee.set(k)}u.pluginMessage.event==="client_connected"?(console.log("Client connected:",u.pluginMessage.client),u.pluginMessage.client.source==="browser"&&Z.update(p=>[...p,u.pluginMessage.client]),u.pluginMessage.client.source==="plugin-window"&&ee.update(p=>[...p,u.pluginMessage.client])):u.pluginMessage.event==="client_disconnected"&&(console.log("Client disconnected:",u.pluginMessage.client),ee.update(p=>p.filter(y=>y.id!==u.pluginMessage.client.id)),Z.update(p=>p.filter(y=>y.id!==u.pluginMessage.client.id)))}}catch(u){j.error("Error in message listener:",u)}},g.onclose=()=>{clearInterval(s),i.forEach(f=>f&&f()),ke.set(!1),console.warn("WebSocket connection closed")}),g}function Tt(n){let e,t,r;return{c(){e=C("svg"),t=C("rect"),r=C("rect"),l(t,"x","5.5"),l(t,"y","12.5"),l(t,"width","9"),l(t,"height","6"),l(t,"rx","1"),l(t,"stroke","currentColor"),l(t,"stroke-opacity","0.3"),l(t,"stroke-linecap","round"),l(r,"x","5.5"),l(r,"y","5.5"),l(r,"width","13"),l(r,"height","13"),l(r,"rx","1"),l(r,"stroke","currentColor"),l(r,"stroke-linecap","round"),l(e,"width","24"),l(e,"height","24"),l(e,"viewBox","0 0 24 24"),l(e,"fill","none"),l(e,"xmlns","http://www.w3.org/2000/svg"),l(e,"class","svelte-ktigax")},m(o,i){S(o,e,i),w(e,t),w(e,r)},d(o){o&&E(e)}}}function It(n){let e,t,r;return{c(){e=C("svg"),t=C("rect"),r=C("rect"),l(t,"x","5.5"),l(t,"y","5.5"),l(t,"width","13"),l(t,"height","13"),l(t,"rx","1"),l(t,"stroke","currentColor"),l(t,"stroke-opacity","0.3"),l(t,"stroke-linecap","round"),l(r,"x","5.5"),l(r,"y","12.5"),l(r,"width","9"),l(r,"height","6"),l(r,"rx","1"),l(r,"stroke","currentColor"),l(e,"width","24"),l(e,"height","24"),l(e,"viewBox","0 0 24 24"),l(e,"fill","none"),l(e,"xmlns","http://www.w3.org/2000/svg"),l(e,"class","svelte-ktigax")},m(o,i){S(o,e,i),w(e,t),w(e,r)},d(o){o&&E(e)}}}function Nt(n){let e,t;return{c(){e=C("svg"),t=C("rect"),l(t,"x","8"),l(t,"y","10"),l(t,"width","8"),l(t,"height","4"),l(t,"rx","2"),l(t,"stroke","currentColor"),l(e,"width","24"),l(e,"height","24"),l(e,"viewBox","0 0 24 24"),l(e,"fill","none"),l(e,"xmlns","http://www.w3.org/2000/svg"),l(e,"class","svelte-ktigax")},m(r,o){S(r,e,o),w(e,t)},d(r){r&&E(e)}}}function At(n){let e,t;return{c(){e=C("svg"),t=C("rect"),l(t,"x","8"),l(t,"y","10"),l(t,"width","8"),l(t,"height","4"),l(t,"rx","2"),l(t,"fill","#77C515"),l(t,"stroke","currentColor"),l(e,"width","24"),l(e,"height","24"),l(e,"viewBox","0 0 24 24"),l(e,"fill","none"),l(e,"xmlns","http://www.w3.org/2000/svg"),l(e,"class","svelte-ktigax")},m(r,o){S(r,e,o),w(e,t)},d(r){r&&E(e)}}}function Pt(n){let e,t,r,o,i,s,d;function c(u,p){return u[0]?It:Tt}let a=c(n),h=a(n);function _(u,p){return u[1].length>0?At:Nt}let g=_(n),f=g(n);return{c(){e=N("div"),t=N("button"),h.c(),r=te(),o=N("div"),i=te(),f.c(),l(t,"class","Button svelte-ktigax"),l(o,"class","spacer svelte-ktigax"),l(e,"class","Toolbar svelte-ktigax")},m(u,p){S(u,e,p),w(e,t),h.m(t,null),w(e,r),w(e,o),w(e,i),f.m(e,null),s||(d=ze(t,"click",n[4]),s=!0)},p(u,[p]){a!==(a=c(u))&&(h.d(1),h=a(u),h&&(h.c(),h.m(t,null))),g!==(g=_(u))&&(f.d(1),f=g(u),f&&(f.c(),f.m(e,null)))},i:v,o:v,d(u){u&&E(e),h.d(),f.d(),s=!1,d()}}}function Rt(n,e,t){let r;je(n,Z,c=>t(1,r=c));let{options:o=null}=e,i;window.runtimeData.command==="preview"&&(i=!0);function s(c){console.log("button clicked"),i?parent.postMessage({pluginMessage:{event:"PLUGMA_MAXIMISE_WINDOW"},pluginId:"*"},"*"):parent.postMessage({pluginMessage:{event:"PLUGMA_MINIMISE_WINDOW"},pluginId:"*"},"*"),t(0,i=!i)}const d=c=>{s()};return n.$$set=c=>{"options"in c&&t(3,o=c.options)},[i,r,s,o,d]}class jt extends we{constructor(e){super(),be(this,e,Rt,Pt,re,{options:3})}}function Bt(n){let e,t,r,o;const i=[Wt,Dt],s=[];function d(c,a){return c[2]?0:1}return e=d(n),t=s[e]=i[e](n),{c(){t.c(),r=ye()},m(c,a){s[e].m(c,a),S(c,r,a),o=!0},p(c,a){let h=e;e=d(c),e===h?s[e].p(c,a):(Fe(),$(s[h],1,1,()=>{s[h]=null}),Ge(),t=s[e],t?t.p(c,a):(t=s[e]=i[e](c),t.c()),O(t,1),t.m(r.parentNode,r))},i(c){o||(O(t),o=!0)},o(c){$(t),o=!1},d(c){c&&E(r),s[e].d(c)}}}function Dt(n){let e,t;return e=new oe({}),{c(){H(e.$$.fragment)},m(r,o){G(e,r,o),t=!0},p:v,i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){$(e.$$.fragment,r),t=!1},d(r){U(e,r)}}}function Wt(n){let e,t,r,o;const i=[Ut,Gt,Ft],s=[];function d(c,a){return c[5]?c[1]?c[0].length<1?2:-1:1:0}return~(e=d(n))&&(t=s[e]=i[e](n)),{c(){t&&t.c(),r=ye()},m(c,a){~e&&s[e].m(c,a),S(c,r,a),o=!0},p(c,a){let h=e;e=d(c),e!==h&&(t&&(Fe(),$(s[h],1,1,()=>{s[h]=null}),Ge()),~e?(t=s[e],t||(t=s[e]=i[e](c),t.c()),O(t,1),t.m(r.parentNode,r)):t=null)},i(c){o||(O(t),o=!0)},o(c){$(t),o=!1},d(c){c&&E(r),~e&&s[e].d(c)}}}function Ft(n){let e,t;return e=new oe({props:{message:"Open plugin inside Figma"}}),{c(){H(e.$$.fragment)},m(r,o){G(e,r,o),t=!0},i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){$(e.$$.fragment,r),t=!1},d(r){U(e,r)}}}function Gt(n){let e,t;return e=new oe({props:{message:"Connecting to websocket server..."}}),{c(){H(e.$$.fragment)},m(r,o){G(e,r,o),t=!0},i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){$(e.$$.fragment,r),t=!1},d(r){U(e,r)}}}function Ut(n){let e,t;return e=new oe({props:{message:"Websockets disababled"}}),{c(){H(e.$$.fragment)},m(r,o){G(e,r,o),t=!0},i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){$(e.$$.fragment,r),t=!1},d(r){U(e,r)}}}function Vt(n){let e,t,r,o;e=new jt({});let i=!(n[3]||n[4])&&Bt(n);return{c(){H(e.$$.fragment),t=te(),i&&i.c(),r=ye()},m(s,d){G(e,s,d),S(s,t,d),i&&i.m(s,d),S(s,r,d),o=!0},p(s,[d]){s[3]||s[4]||i.p(s,d)},i(s){o||(O(e.$$.fragment,s),O(i),o=!0)},o(s){$(e.$$.fragment,s),$(i),o=!1},d(s){s&&(E(t),E(r)),U(e,s),i&&i.d(s)}}}function Yt(){let n={pluginMessage:{type:"GET_FIGMA_CLASSES_AND_STYLES"},pluginId:"*"};parent.postMessage(n,"*")}function qt(){document.addEventListener("keydown",n=>{n.keyCode===80&&!n.shiftKey&&n.altKey&&!n.ctrlKey&&n.metaKey?(window.parent.postMessage("$INTERNAL_DO_NOT_USE$RERUN_PLUGIN$","*"),n.stopPropagation(),n.stopImmediatePropagation()):n.metaKey&&(n.keyCode===65?document.execCommand("selectAll"):n.keyCode===90?n.shiftKey?document.execCommand("redo"):document.execCommand("undo"):(n.key==="x"||n.key,n.key==="c"||n.key,n.key==="v"||n.key))},!0)}function Kt(n,e,t){let r;je(n,ee,y=>t(0,r=y));const o=document.querySelector("html"),i=window.self!==window.top,s=typeof figma<"u";let d=!1,c=window.runtimeData.websockets||!1,a=Lt(null,window.runtimeData.websockets,!0),h=`http://localhost:${window.runtimeData.port}`;new Ue({debug:window.runtimeData.debug});function _(){const y=k=>{const b=k.data.pluginMessage;if(b.type==="FIGMA_HTML_CLASSES"&&(o.className=b.data,localStorage.setItem("figmaHtmlClasses",b.data)),b.type==="FIGMA_STYLES"){const A=document.createElement("style");A.type="text/css",A.innerText=b.data,document.head.appendChild(A),localStorage.setItem("figmaStyles",b.data)}};a.on(y,"window")}function g(){const y=localStorage.getItem("figmaHtmlClasses");y&&(o.className=y);const k=localStorage.getItem("figmaStyles");if(k){const b=document.createElement("style");b.type="text/css",b.innerText=k,document.head.appendChild(b)}}function f(){if(!(i||s)){let ie=function(M){A.forEach(L=>{try{L(M)}catch(se){console.error("Error in message listener:",se)}})};var y=ie;let k=window.addEventListener,b=null,A=[];window.addEventListener=function(M,L,se){M==="message"?A.push(L):k.call(window,M,L,se)},a.on(M=>{ie(M)},"ws"),Object.defineProperty(window,"onmessage",{get(){return b},set(M){b=M,a.on(L=>{b&&b(L),ie(L)},"ws")}})}}function u(){i||s||(window.postMessage=function(y,k,b){return it(),a.post(y,"ws"),null})}qt(),u(),f(),_(),g(),a.open(()=>{t(1,d=!0),Yt()}),a.close(()=>{t(1,d=!1)});let p=!0;return et(async()=>{parent.postMessage({pluginMessage:{type:"VITE_APP_MOUNTED"},pluginId:"*"},"*")}),n.$$.update=()=>{n.$$.dirty&1&&console.log("pluginWindowClients",r,r.length)},st(h,null,y=>{t(2,p=y)}),[r,d,p,i,s,c]}class Ht extends we{constructor(e){super(),be(this,e,Kt,Vt,re,{})}}const Qt="ViteApp";new Ht({target:document.getElementById(Qt)});
</script>
<div id="ViteApp"></div>