<style rel="stylesheet" crossorigin>#plugma-status.svelte-1vwh5jg{z-index:1;display:flex;position:absolute;top:0;bottom:0;right:0;left:0;background-color:var(--figma-color-bg-brand-tertiary);border:1px solid var(--figma-color-border);padding:8px;border-radius:4px;margin:16px;color:var(--figma-color-text);font-family:Inter,system-ui,Helvetica,Arial,sans-serif;font-display:optional;font-size:12px;box-sizing:border-box;justify-content:center;align-items:center}.server-not-active.svelte-1vwh5jg{display:flex;gap:4px;align-items:center}
</style>
<script type="module" crossorigin>var Qe=Object.defineProperty;var Je=(t,e,n)=>e in t?Qe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var oe=(t,e,n)=>Je(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();function C(){}function je(t){return t()}function ve(){return Object.create(null)}function U(t){t.forEach(je)}function De(t){return typeof t=="function"}function ye(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function ze(t){return Object.keys(t).length===0}function Be(t,...e){if(t==null){for(const r of e)r(void 0);return C}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function Ze(t){let e;return Be(t,n=>e=n)(),e}function Ee(t,e,n){t.$$.on_destroy.push(Be(e,n))}function K(t,e){t.appendChild(e)}function L(t,e,n){t.insertBefore(e,n||null)}function S(t){t.parentNode&&t.parentNode.removeChild(t)}function ae(t){return document.createElement(t)}function Ce(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function be(t){return document.createTextNode(t)}function J(){return be(" ")}function We(){return be("")}function w(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Xe(t){return Array.from(t.childNodes)}function et(t,e){e=""+e,t.data!==e&&(t.data=e)}let F;function W(t){F=t}function tt(){if(!F)throw new Error("Function called outside component initialization");return F}function nt(t){tt().$$.on_mount.push(t)}const I=[],Se=[];let R=[];const Oe=[],Fe=Promise.resolve();let fe=!1;function Ge(){fe||(fe=!0,Fe.then(Ue))}function se(){return Ge(),Fe}function de(t){R.push(t)}const ie=new Set;let A=0;function Ue(){if(A!==0)return;const t=F;do{try{for(;A<I.length;){const e=I[A];A++,W(e),rt(e.$$)}}catch(e){throw I.length=0,A=0,e}for(W(null),I.length=0,A=0;Se.length;)Se.pop()();for(let e=0;e<R.length;e+=1){const n=R[e];ie.has(n)||(ie.add(n),n())}R.length=0}while(I.length);for(;Oe.length;)Oe.pop()();fe=!1,ie.clear(),W(t)}function rt(t){if(t.fragment!==null){t.update(),U(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(de)}}function ot(t){const e=[],n=[];R.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),R=e}const z=new Set;let k;function le(){k={r:0,c:[],p:k}}function ce(){k.r||U(k.c),k=k.p}function y(t,e){t&&t.i&&(z.delete(t),t.i(e))}function v(t,e,n,r){if(t&&t.o){if(z.has(t))return;z.add(t),k.c.push(()=>{z.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function ee(t){t&&t.c()}function V(t,e,n){const{fragment:r,after_update:o}=t.$$;r&&r.m(e,n),de(()=>{const s=t.$$.on_mount.map(je).filter(De);t.$$.on_destroy?t.$$.on_destroy.push(...s):U(s),t.$$.on_mount=[]}),o.forEach(de)}function Y(t,e){const n=t.$$;n.fragment!==null&&(ot(n.after_update),U(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function st(t,e){t.$$.dirty[0]===-1&&(I.push(t),Ge(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Ve(t,e,n,r,o,s,i=null,a=[-1]){const u=F;W(t);const l=t.$$={fragment:null,ctx:[],props:s,update:C,not_equal:o,bound:ve(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:ve(),dirty:a,skip_bound:!1,root:e.target||u.$$.root};i&&i(l.root);let d=!1;if(l.ctx=n?n(t,e.props||{},(h,g,...c)=>{const f=c.length?c[0]:g;return l.ctx&&o(l.ctx[h],l.ctx[h]=f)&&(!l.skip_bound&&l.bound[h]&&l.bound[h](f),d&&st(t,h)),g}):[],l.update(),d=!0,U(l.before_update),l.fragment=r?r(l.ctx):!1,e.target){if(e.hydrate){const h=Xe(e.target);l.fragment&&l.fragment.l(h),h.forEach(S)}else l.fragment&&l.fragment.c();e.intro&&y(t.$$.fragment),V(t,e.target,e.anchor),Ue()}W(u)}class Ye{constructor(){oe(this,"$$");oe(this,"$$set")}$destroy(){Y(this,1),this.$destroy=C}$on(e,n){if(!De(n))return C;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const o=r.indexOf(n);o!==-1&&r.splice(o,1)}}$set(e){this.$$set&&!ze(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const it="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(it);let lt=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,n)=>(n&=63,n<36?e+=n.toString(36):n<62?e+=(n-26).toString(36).toUpperCase():n>62?e+="-":e+="_",e),"");function ct(t,e,n){let r=1e3,o=!0;async function s(){const i=document.getElementById("app");try{const a=await fetch(t);a.ok&&!o?(o=!0,i&&(i.style.display="block"),await se(),n(o)):!a.ok&&o&&(o=!1,i.style.display="none",await se(),n(o))}catch{o&&(o=!1,i&&(i.style.display="none"),await se(),n(o))}}n(o),s(),setInterval(s,r)}function ut(t){let e;return{c(){e=ae("p"),e.textContent="Dev server inactive"},m(n,r){L(n,e,r)},p:C,d(n){n&&S(e)}}}function at(t){let e;return{c(){e=be(t[0])},m(n,r){L(n,e,r)},p(n,r){r&1&&et(e,n[0])},d(n){n&&S(e)}}}function ft(t){let e,n,r,o,s;function i(l,d){return l[0]?at:ut}let a=i(t),u=a(t);return{c(){e=ae("div"),n=ae("div"),r=Ce("svg"),o=Ce("path"),s=J(),u.c(),w(o,"fill-rule","evenodd"),w(o,"clip-rule","evenodd"),w(o,"d","M15.3463 8.16209C15.633 7.65235 16.3669 7.65235 16.6536 8.16209L24.3713 21.8823C24.6525 22.3822 24.2912 23 23.7176 23H8.28234C7.70872 23 7.34744 22.3822 7.62866 21.8823L15.3463 8.16209ZM16 12.3817C16.497 12.3817 16.9 12.7847 16.9 13.2817V16.3695C16.9 16.8666 16.497 17.2695 16 17.2695C15.5029 17.2695 15.1 16.8666 15.1 16.3695V13.2817C15.1 12.7847 15.5029 12.3817 16 12.3817ZM17.1 20C17.1 19.3925 16.6075 18.9 16 18.9C15.3924 18.9 14.9 19.3925 14.9 20V20.0685C14.9 20.6761 15.3924 21.1685 16 21.1685C16.6075 21.1685 17.1 20.6761 17.1 20.0685V20Z"),w(o,"fill","currentColor"),w(o,"fill-opacity","0.8"),w(r,"width","32"),w(r,"height","32"),w(r,"viewBox","0 0 32 32"),w(r,"fill","none"),w(r,"xmlns","http://www.w3.org/2000/svg"),w(n,"class","server-not-active svelte-1vwh5jg"),w(e,"id","plugma-status"),w(e,"class","svelte-1vwh5jg")},m(l,d){L(l,e,d),K(e,n),K(n,r),K(r,o),K(n,s),u.m(n,null)},p(l,[d]){a===(a=i(l))&&u?u.p(l,d):(u.d(1),u=a(l),u&&(u.c(),u.m(n,null)))},i:C,o:C,d(l){l&&S(e),u.d()}}}function dt(t,e,n){let{message:r=null}=e;return t.$$set=o=>{"message"in o&&n(0,r=o.message)},[r]}class te extends Ye{constructor(e){super(),Ve(this,e,dt,ft,ye,{message:0})}}const P=[];function we(t,e=C){let n;const r=new Set;function o(a){if(ye(t,a)&&(t=a,n)){const u=!P.length;for(const l of r)l[1](),P.push(l,t);if(u){for(let l=0;l<P.length;l+=2)P[l][0](P[l+1]);P.length=0}}}function s(a){o(a(t))}function i(a,u=C){const l=[a,u];return r.add(l),r.size===1&&(n=e(o,s)||C),a(t),()=>{r.delete(l),r.size===0&&n&&(n(),n=null)}}return{set:o,update:s,subscribe:i}}const he=we(!1);let $e=we(!1);const Z=we([]),ue=10,Le=(t=0)=>e=>`\x1B[${e+t}m`,Te=(t=0)=>e=>`\x1B[${38+t};5;${e}m`,Me=(t=0)=>(e,n,r)=>`\x1B[${38+t};2;${e};${n};${r}m`,m={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};Object.keys(m.modifier);const ht=Object.keys(m.color),pt=Object.keys(m.bgColor);[...ht,...pt];function gt(){const t=new Map;for(const[e,n]of Object.entries(m)){for(const[r,o]of Object.entries(n))m[r]={open:`\x1B[${o[0]}m`,close:`\x1B[${o[1]}m`},n[r]=m[r],t.set(o[0],o[1]);Object.defineProperty(m,e,{value:n,enumerable:!1})}return Object.defineProperty(m,"codes",{value:t,enumerable:!1}),m.color.close="\x1B[39m",m.bgColor.close="\x1B[49m",m.color.ansi=Le(),m.color.ansi256=Te(),m.color.ansi16m=Me(),m.bgColor.ansi=Le(ue),m.bgColor.ansi256=Te(ue),m.bgColor.ansi16m=Me(ue),Object.defineProperties(m,{rgbToAnsi256:{value(e,n,r){return e===n&&n===r?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(n/255*5)+Math.round(r/255*5)},enumerable:!1},hexToRgb:{value(e){const n=/[a-f\d]{6}|[a-f\d]{3}/i.exec(e.toString(16));if(!n)return[0,0,0];let[r]=n;r.length===3&&(r=[...r].map(s=>s+s).join(""));const o=Number.parseInt(r,16);return[o>>16&255,o>>8&255,o&255]},enumerable:!1},hexToAnsi256:{value:e=>m.rgbToAnsi256(...m.hexToRgb(e)),enumerable:!1},ansi256ToAnsi:{value(e){if(e<8)return 30+e;if(e<16)return 90+(e-8);let n,r,o;if(e>=232)n=((e-232)*10+8)/255,r=n,o=n;else{e-=16;const a=e%36;n=Math.floor(e/36)/5,r=Math.floor(a/6)/5,o=a%6/5}const s=Math.max(n,r,o)*2;if(s===0)return 30;let i=30+(Math.round(o)<<2|Math.round(r)<<1|Math.round(n));return s===2&&(i+=60),i},enumerable:!1},rgbToAnsi:{value:(e,n,r)=>m.ansi256ToAnsi(m.rgbToAnsi256(e,n,r)),enumerable:!1},hexToAnsi:{value:e=>m.ansi256ToAnsi(m.hexToAnsi256(e)),enumerable:!1}}),m}const E=gt(),H=(()=>{if(navigator.userAgentData){const t=navigator.userAgentData.brands.find(({brand:e})=>e==="Chromium");if(t&&t.version>93)return 3}return/\b(Chrome|Chromium)\//.test(navigator.userAgent)?1:0})(),xe=H!==0&&{level:H,hasBasic:!0,has256:H>=2,has16m:H>=3},mt={stdout:xe,stderr:xe};function _t(t,e,n){let r=t.indexOf(e);if(r===-1)return t;const o=e.length;let s=0,i="";do i+=t.slice(s,r)+e+n,s=r+o,r=t.indexOf(e,s);while(r!==-1);return i+=t.slice(s),i}function yt(t,e,n,r){let o=0,s="";do{const i=t[r-1]==="\r";s+=t.slice(o,i?r-1:r)+e+(i?`\r
`:`
`)+n,o=r+1,r=t.indexOf(`
`,o)}while(r!==-1);return s+=t.slice(o),s}const{stdout:ke,stderr:Ne}=mt,pe=Symbol("GENERATOR"),j=Symbol("STYLER"),G=Symbol("IS_EMPTY"),Ae=["ansi","ansi","ansi256","ansi16m"],D=Object.create(null),bt=(t,e={})=>{if(e.level&&!(Number.isInteger(e.level)&&e.level>=0&&e.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");const n=ke?ke.level:0;t.level=e.level===void 0?n:e.level},wt=t=>{const e=(...n)=>n.join(" ");return bt(e,t),Object.setPrototypeOf(e,q.prototype),e};function q(t){return wt(t)}Object.setPrototypeOf(q.prototype,Function.prototype);for(const[t,e]of Object.entries(E))D[t]={get(){const n=X(this,me(e.open,e.close,this[j]),this[G]);return Object.defineProperty(this,t,{value:n}),n}};D.visible={get(){const t=X(this,this[j],!0);return Object.defineProperty(this,"visible",{value:t}),t}};const ge=(t,e,n,...r)=>t==="rgb"?e==="ansi16m"?E[n].ansi16m(...r):e==="ansi256"?E[n].ansi256(E.rgbToAnsi256(...r)):E[n].ansi(E.rgbToAnsi(...r)):t==="hex"?ge("rgb",e,n,...E.hexToRgb(...r)):E[n][t](...r),vt=["rgb","hex","ansi256"];for(const t of vt){D[t]={get(){const{level:n}=this;return function(...r){const o=me(ge(t,Ae[n],"color",...r),E.color.close,this[j]);return X(this,o,this[G])}}};const e="bg"+t[0].toUpperCase()+t.slice(1);D[e]={get(){const{level:n}=this;return function(...r){const o=me(ge(t,Ae[n],"bgColor",...r),E.bgColor.close,this[j]);return X(this,o,this[G])}}}}const Et=Object.defineProperties(()=>{},{...D,level:{enumerable:!0,get(){return this[pe].level},set(t){this[pe].level=t}}}),me=(t,e,n)=>{let r,o;return n===void 0?(r=t,o=e):(r=n.openAll+t,o=e+n.closeAll),{open:t,close:e,openAll:r,closeAll:o,parent:n}},X=(t,e,n)=>{const r=(...o)=>Ct(r,o.length===1?""+o[0]:o.join(" "));return Object.setPrototypeOf(r,Et),r[pe]=t,r[j]=e,r[G]=n,r},Ct=(t,e)=>{if(t.level<=0||!e)return t[G]?"":e;let n=t[j];if(n===void 0)return e;const{openAll:r,closeAll:o}=n;if(e.includes("\x1B"))for(;n!==void 0;)e=_t(e,n.close,n.open),n=n.parent;const s=e.indexOf(`
`);return s!==-1&&(e=yt(e,o,r,s)),r+e+o};Object.defineProperties(q.prototype,D);const Q=q();q({level:Ne?Ne.level:0});class qe{constructor(e={}){this.options={defaultIndentLevel:0,showTimestamp:!1,timestampFormat:"YYYY-MM-DD HH:mm:ss",debug:!1,...e},this.isProd=!0,this.currentIndent=this.options.defaultIndentLevel,this.currentType=null,this.forceLog=!1}format(e={}){return this.currentIndent=e.indent||this.options.defaultIndentLevel,this}log(e,n=null,r=!1){if(!this.options.debug&&this.isProd&&!r)return;const s=[this.formatLog(e[0],this.currentIndent,n),...e.slice(1)];if(this.options.showTimestamp){const i=new Date().toISOString();console.log(`[${i}]`,...s)}else console.log(...s);this.resetFormatting()}text(...e){return this.log(e,null,!0),this}info(...e){return this.log(e,"info"),this}success(...e){return this.log(e,"success"),this}error(...e){return this.log(e,"error",!0),this}warn(...e){return this.log(e,"warning",!0),this}formatLog(e,n=0,r){const o=" ".repeat(n*2),s=this.getPrefix(r);return`${o}${s}${e}`}resetFormatting(){this.currentIndent=this.options.defaultIndentLevel,this.currentType=null}getPrefix(e){switch(e){case"info":return Q.blue.bold("INFO: ");case"success":return Q.green.bold("SUCCESS: ");case"error":return Q.red.bold("ERROR: ");case"warning":return Q.yellow.bold("WARNING: ");default:return""}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var _e=function(t,e){return _e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)r.hasOwnProperty(o)&&(n[o]=r[o])},_e(t,e)};function Ke(t,e){_e(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function St(t){var e=typeof Symbol=="function"&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function Ot(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),o,s=[],i;try{for(;(e===void 0||e-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(a){i={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return s}function $t(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Ot(arguments[e]));return t}var He=function(){function t(e,n){this.target=n,this.type=e}return t}(),Lt=function(t){Ke(e,t);function e(n,r){var o=t.call(this,"error",r)||this;return o.message=n.message,o.error=n,o}return e}(He),Tt=function(t){Ke(e,t);function e(n,r,o){n===void 0&&(n=1e3),r===void 0&&(r="");var s=t.call(this,"close",o)||this;return s.wasClean=!0,s.code=n,s.reason=r,s}return e}(He);/*!
 * Reconnecting WebSocket
 * by Pedro Ladaria <pedro.ladaria@gmail.com>
 * https://github.com/pladaria/reconnecting-websocket
 * License MIT
 */var Mt=function(){if(typeof WebSocket<"u")return WebSocket},xt=function(t){return typeof t<"u"&&!!t&&t.CLOSING===2},x={maxReconnectionDelay:1e4,minReconnectionDelay:1e3+Math.random()*4e3,minUptime:5e3,reconnectionDelayGrowFactor:1.3,connectionTimeout:4e3,maxRetries:1/0,maxEnqueuedMessages:1/0,startClosed:!1,debug:!1},kt=function(){function t(e,n,r){var o=this;r===void 0&&(r={}),this._listeners={error:[],message:[],open:[],close:[]},this._retryCount=-1,this._shouldReconnect=!0,this._connectLock=!1,this._binaryType="blob",this._closeCalled=!1,this._messageQueue=[],this.onclose=null,this.onerror=null,this.onmessage=null,this.onopen=null,this._handleOpen=function(s){o._debug("open event");var i=o._options.minUptime,a=i===void 0?x.minUptime:i;clearTimeout(o._connectTimeout),o._uptimeTimeout=setTimeout(function(){return o._acceptOpen()},a),o._ws.binaryType=o._binaryType,o._messageQueue.forEach(function(u){return o._ws.send(u)}),o._messageQueue=[],o.onopen&&o.onopen(s),o._listeners.open.forEach(function(u){return o._callEventListener(s,u)})},this._handleMessage=function(s){o._debug("message event"),o.onmessage&&o.onmessage(s),o._listeners.message.forEach(function(i){return o._callEventListener(s,i)})},this._handleError=function(s){o._debug("error event",s.message),o._disconnect(void 0,s.message==="TIMEOUT"?"timeout":void 0),o.onerror&&o.onerror(s),o._debug("exec error listeners"),o._listeners.error.forEach(function(i){return o._callEventListener(s,i)}),o._connect()},this._handleClose=function(s){o._debug("close event"),o._clearTimeouts(),o._shouldReconnect&&o._connect(),o.onclose&&o.onclose(s),o._listeners.close.forEach(function(i){return o._callEventListener(s,i)})},this._url=e,this._protocols=n,this._options=r,this._options.startClosed&&(this._shouldReconnect=!1),this._connect()}return Object.defineProperty(t,"CONNECTING",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(t,"OPEN",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(t,"CLOSING",{get:function(){return 2},enumerable:!0,configurable:!0}),Object.defineProperty(t,"CLOSED",{get:function(){return 3},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"CONNECTING",{get:function(){return t.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"OPEN",{get:function(){return t.OPEN},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"CLOSING",{get:function(){return t.CLOSING},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"CLOSED",{get:function(){return t.CLOSED},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"binaryType",{get:function(){return this._ws?this._ws.binaryType:this._binaryType},set:function(e){this._binaryType=e,this._ws&&(this._ws.binaryType=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"retryCount",{get:function(){return Math.max(this._retryCount,0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bufferedAmount",{get:function(){var e=this._messageQueue.reduce(function(n,r){return typeof r=="string"?n+=r.length:r instanceof Blob?n+=r.size:n+=r.byteLength,n},0);return e+(this._ws?this._ws.bufferedAmount:0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"extensions",{get:function(){return this._ws?this._ws.extensions:""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"protocol",{get:function(){return this._ws?this._ws.protocol:""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"readyState",{get:function(){return this._ws?this._ws.readyState:this._options.startClosed?t.CLOSED:t.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"url",{get:function(){return this._ws?this._ws.url:""},enumerable:!0,configurable:!0}),t.prototype.close=function(e,n){if(e===void 0&&(e=1e3),this._closeCalled=!0,this._shouldReconnect=!1,this._clearTimeouts(),!this._ws){this._debug("close enqueued: no ws instance");return}if(this._ws.readyState===this.CLOSED){this._debug("close: already closed");return}this._ws.close(e,n)},t.prototype.reconnect=function(e,n){this._shouldReconnect=!0,this._closeCalled=!1,this._retryCount=-1,!this._ws||this._ws.readyState===this.CLOSED?this._connect():(this._disconnect(e,n),this._connect())},t.prototype.send=function(e){if(this._ws&&this._ws.readyState===this.OPEN)this._debug("send",e),this._ws.send(e);else{var n=this._options.maxEnqueuedMessages,r=n===void 0?x.maxEnqueuedMessages:n;this._messageQueue.length<r&&(this._debug("enqueue",e),this._messageQueue.push(e))}},t.prototype.addEventListener=function(e,n){this._listeners[e]&&this._listeners[e].push(n)},t.prototype.dispatchEvent=function(e){var n,r,o=this._listeners[e.type];if(o)try{for(var s=St(o),i=s.next();!i.done;i=s.next()){var a=i.value;this._callEventListener(e,a)}}catch(u){n={error:u}}finally{try{i&&!i.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return!0},t.prototype.removeEventListener=function(e,n){this._listeners[e]&&(this._listeners[e]=this._listeners[e].filter(function(r){return r!==n}))},t.prototype._debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._options.debug&&console.log.apply(console,$t(["RWS>"],e))},t.prototype._getNextDelay=function(){var e=this._options,n=e.reconnectionDelayGrowFactor,r=n===void 0?x.reconnectionDelayGrowFactor:n,o=e.minReconnectionDelay,s=o===void 0?x.minReconnectionDelay:o,i=e.maxReconnectionDelay,a=i===void 0?x.maxReconnectionDelay:i,u=0;return this._retryCount>0&&(u=s*Math.pow(r,this._retryCount-1),u>a&&(u=a)),this._debug("next delay",u),u},t.prototype._wait=function(){var e=this;return new Promise(function(n){setTimeout(n,e._getNextDelay())})},t.prototype._getNextUrl=function(e){if(typeof e=="string")return Promise.resolve(e);if(typeof e=="function"){var n=e();if(typeof n=="string")return Promise.resolve(n);if(n.then)return n}throw Error("Invalid URL")},t.prototype._connect=function(){var e=this;if(!(this._connectLock||!this._shouldReconnect)){this._connectLock=!0;var n=this._options,r=n.maxRetries,o=r===void 0?x.maxRetries:r,s=n.connectionTimeout,i=s===void 0?x.connectionTimeout:s,a=n.WebSocket,u=a===void 0?Mt():a;if(this._retryCount>=o){this._debug("max retries reached",this._retryCount,">=",o);return}if(this._retryCount++,this._debug("connect",this._retryCount),this._removeListeners(),!xt(u))throw Error("No valid WebSocket class provided");this._wait().then(function(){return e._getNextUrl(e._url)}).then(function(l){e._closeCalled||(e._debug("connect",{url:l,protocols:e._protocols}),e._ws=e._protocols?new u(l,e._protocols):new u(l),e._ws.binaryType=e._binaryType,e._connectLock=!1,e._addListeners(),e._connectTimeout=setTimeout(function(){return e._handleTimeout()},i))})}},t.prototype._handleTimeout=function(){this._debug("timeout event"),this._handleError(new Lt(Error("TIMEOUT"),this))},t.prototype._disconnect=function(e,n){if(e===void 0&&(e=1e3),this._clearTimeouts(),!!this._ws){this._removeListeners();try{this._ws.close(e,n),this._handleClose(new Tt(e,n,this))}catch{}}},t.prototype._acceptOpen=function(){this._debug("accept open"),this._retryCount=0},t.prototype._callEventListener=function(e,n){"handleEvent"in n?n.handleEvent(e):n(e)},t.prototype._removeListeners=function(){this._ws&&(this._debug("removeListeners"),this._ws.removeEventListener("open",this._handleOpen),this._ws.removeEventListener("close",this._handleClose),this._ws.removeEventListener("message",this._handleMessage),this._ws.removeEventListener("error",this._handleError))},t.prototype._addListeners=function(){this._ws&&(this._debug("addListeners"),this._ws.addEventListener("open",this._handleOpen),this._ws.addEventListener("close",this._handleClose),this._ws.addEventListener("message",this._handleMessage),this._ws.addEventListener("error",this._handleError))},t.prototype._clearTimeouts=function(){clearTimeout(this._connectTimeout),clearTimeout(this._uptimeTimeout)},t}();const B=new qe({debug:window.runtimeData.debug});function Nt(t=null,e=!0,n=!1,r=!1){const o=[];let s=[],i=[],a;const u={send:c=>{console.warn("WebSocket is disabled, cannot send data:",c)},post:(c,f)=>{Array.isArray(c)?c.forEach(p=>l(p,f)):l(c,f)},on:(c,f)=>{Array.isArray(f)?f.forEach(p=>h(p,c)):h(f,c)},open:c=>{},close:c=>{console.warn("WebSocket is disabled, no connection to close."),c&&c()},addEventListener:(c,f)=>{},removeEventListener:(c,f)=>{},onmessage:null,onopen:null,onclose:null,onerror:null};function l(c,f){Array.isArray(f)?f.forEach(p=>d(p,c)):d(f,c)}function d(c,f){B.info(`--- ws post, ${c}`,f),c==="iframe"&&t&&t.contentWindow.postMessage?t.contentWindow.postMessage(f,"*"):c==="parent"&&window.parent?window.parent.postMessage(f,"*"):c==="ws"?!e||!g||g.readyState!==WebSocket.OPEN?(console.warn("WebSocket is disabled or not open, queuing message:",f),o.push({message:f,via:c})):g.send(JSON.stringify(f)):console.warn(`Cannot send message via ${c}.`)}function h(c,f){c==="window"?window.addEventListener("message",f):c==="parent"&&window.parent?window.addEventListener("message",p=>{p.source===window.parent&&f(p)}):c==="ws"&&e?g.addEventListener("message",p=>{try{const O=JSON.parse(p.data),b={...p,data:O};f(b)}catch(O){console.error("Failed to parse WebSocket message data:",O),f(p)}}):console.warn(`Cannot add message listener via ${c}.`)}if(!e||!("WebSocket"in window))return u;let g=new kt("ws://localhost:9001/ws");return g.post=(c,f=["ws"])=>{Array.isArray(c)?c.forEach(p=>l(p,f)):l(c,f)},g.on=(c,f=["ws"])=>{Array.isArray(f)?f.forEach(p=>h(p,c)):h(f,c)},g.open=c=>{s.push(c),g.readyState===WebSocket.OPEN&&c()},g.close=c=>{i.push(c),g.readyState===WebSocket.OPEN?(g.addEventListener("close",()=>{clearInterval(a),i.forEach(f=>f&&f())}),g.close()):(console.warn("WebSocket is not open, nothing to close."),c&&c())},e&&(g.onopen=()=>{for(s.forEach(c=>c());o.length>0;){const{message:c,via:f}=o.shift();l(c,f)}n||r||he.set(!0),a=window.setInterval(()=>{g.readyState===WebSocket.OPEN&&(g.send(JSON.stringify({pluginMessage:{event:"ping"},pluginId:"*"})),console.log("Ping sent to the server"))},1e4)},g.onmessage=c=>{try{if(B.info("Received raw WebSocket message:",c.data),!c.data){B.warn("Received empty message");return}let f;try{f=JSON.parse(c.data)}catch{B.warn("Failed to parse WebSocket message:",c.data);return}if(f.pluginMessage){if(f.pluginMessage.event==="ping"&&(g.send(JSON.stringify({pluginMessage:{event:"pong"},pluginId:"*"})),console.log("Pong sent to the server")),f.pluginMessage.event==="client_list"&&!(n||r)){const p=f.pluginMessage.clients||[];Z.set(p)}f.pluginMessage.event==="client_connected"?(console.log(`Client connected: ${f.pluginMessage.clientId}`),Ze($e)||n||r||$e.set(f.pluginMessage.clientId),n||r||Z.update(p=>[...p,f.pluginMessage.clientId])):f.pluginMessage.event==="client_disconnected"&&(console.log(`Client disconnected: ${f.pluginMessage.clientId}`),n||r||Z.update(p=>p.filter(O=>O!==f.pluginMessage.clientId)))}}catch(f){B.error("Error in message listener:",f)}},g.onclose=()=>{clearInterval(a),i.forEach(c=>c&&c()),n||r||he.set(!1),console.warn("WebSocket connection closed")}),g}function At(t){let e,n,r,o,s,i=!t[5]&&Pt(),a=!t[1]&&Pe(),u=!(t[0].length>0)&&Ie(),l=!t[2]&&Re();return{c(){i&&i.c(),e=J(),a&&a.c(),n=J(),u&&u.c(),r=J(),l&&l.c(),o=We()},m(d,h){i&&i.m(d,h),L(d,e,h),a&&a.m(d,h),L(d,n,h),u&&u.m(d,h),L(d,r,h),l&&l.m(d,h),L(d,o,h),s=!0},p(d,h){d[1]?a&&(le(),v(a,1,1,()=>{a=null}),ce()):a?h&2&&y(a,1):(a=Pe(),a.c(),y(a,1),a.m(n.parentNode,n)),d[0].length>0?u&&(le(),v(u,1,1,()=>{u=null}),ce()):u?h&1&&y(u,1):(u=Ie(),u.c(),y(u,1),u.m(r.parentNode,r)),d[2]?l&&(le(),v(l,1,1,()=>{l=null}),ce()):l?h&4&&y(l,1):(l=Re(),l.c(),y(l,1),l.m(o.parentNode,o))},i(d){s||(y(i),y(a),y(u),y(l),s=!0)},o(d){v(i),v(a),v(u),v(l),s=!1},d(d){d&&(S(e),S(n),S(r),S(o)),i&&i.d(d),a&&a.d(d),u&&u.d(d),l&&l.d(d)}}}function Pt(t){let e,n;return e=new te({props:{message:"Websockets disababled"}}),{c(){ee(e.$$.fragment)},m(r,o){V(e,r,o),n=!0},i(r){n||(y(e.$$.fragment,r),n=!0)},o(r){v(e.$$.fragment,r),n=!1},d(r){Y(e,r)}}}function Pe(t){let e,n;return e=new te({props:{message:"Websocket server inactive"}}),{c(){ee(e.$$.fragment)},m(r,o){V(e,r,o),n=!0},i(r){n||(y(e.$$.fragment,r),n=!0)},o(r){v(e.$$.fragment,r),n=!1},d(r){Y(e,r)}}}function Ie(t){let e,n;return e=new te({props:{message:"Open plugin inside Figma"}}),{c(){ee(e.$$.fragment)},m(r,o){V(e,r,o),n=!0},i(r){n||(y(e.$$.fragment,r),n=!0)},o(r){v(e.$$.fragment,r),n=!1},d(r){Y(e,r)}}}function Re(t){let e,n;return e=new te({}),{c(){ee(e.$$.fragment)},m(r,o){V(e,r,o),n=!0},i(r){n||(y(e.$$.fragment,r),n=!0)},o(r){v(e.$$.fragment,r),n=!1},d(r){Y(e,r)}}}function It(t){let e,n,r=!(t[3]||t[4])&&At(t);return{c(){r&&r.c(),e=We()},m(o,s){r&&r.m(o,s),L(o,e,s),n=!0},p(o,[s]){o[3]||o[4]||r.p(o,s)},i(o){n||(y(r),n=!0)},o(o){v(r),n=!1},d(o){o&&S(e),r&&r.d(o)}}}function Rt(){let t={pluginMessage:{type:"GET_FIGMA_CLASSES_AND_STYLES"},pluginId:"*"};parent.postMessage(t,"*")}function jt(){document.addEventListener("keydown",t=>{t.keyCode===80&&!t.shiftKey&&t.altKey&&!t.ctrlKey&&t.metaKey?(window.parent.postMessage("$INTERNAL_DO_NOT_USE$RERUN_PLUGIN$","*"),t.stopPropagation(),t.stopImmediatePropagation()):t.metaKey&&(t.keyCode===65?document.execCommand("selectAll"):t.keyCode===90?t.shiftKey?document.execCommand("redo"):document.execCommand("undo"):(t.key==="x"||t.key,t.key==="c"||t.key,t.key==="v"||t.key))},!0)}function Dt(t,e,n){let r,o;Ee(t,Z,b=>n(0,r=b)),Ee(t,he,b=>n(6,o=b));const s=document.querySelector("html"),i=window.self!==window.top,a=typeof figma<"u";let u=!1,l=window.runtimeData.websockets||!1,d=Nt(null,window.runtimeData.websockets),h=`http://localhost:${window.runtimeData.port}`;new qe({debug:window.runtimeData.debug});function g(){const b=T=>{const _=T.data.pluginMessage;if(_.type==="FIGMA_HTML_CLASSES"&&(s.className=_.data,localStorage.setItem("figmaHtmlClasses",_.data)),_.type==="FIGMA_STYLES"){const N=document.createElement("style");N.type="text/css",N.innerText=_.data,document.head.appendChild(N),localStorage.setItem("figmaStyles",_.data)}};d.on(b,"window")}function c(){const b=localStorage.getItem("figmaHtmlClasses");b&&(s.className=b);const T=localStorage.getItem("figmaStyles");if(T){const _=document.createElement("style");_.type="text/css",_.innerText=T,document.head.appendChild(_)}}function f(){if(!(i||a)){let ne=function($){N.forEach(M=>{try{M($)}catch(re){console.error("Error in message listener:",re)}})};var b=ne;let T=window.addEventListener,_=null,N=[];window.addEventListener=function($,M,re){$==="message"?N.push(M):T.call(window,$,M,re)},d.on($=>{ne($)},"ws"),Object.defineProperty(window,"onmessage",{get(){return _},set($){_=$,d.on(M=>{_&&_(M),ne(M)},"ws")}})}}function p(){i||a||(window.postMessage=function(b,T,_){return lt(),d.post(b,"ws"),null})}jt(),p(),f(),g(),c(),d.open(()=>{n(1,u=!0),Rt()}),d.close(()=>{n(1,u=!1)});let O=!0;return nt(async()=>{parent.postMessage({pluginMessage:{type:"VITE_APP_MOUNTED"},pluginId:"*"},"*")}),t.$$.update=()=>{t.$$.dirty&65&&console.log(o,r)},ct(h,null,b=>{n(2,O=b)}),[r,u,O,i,a,l,o]}class Bt extends Ye{constructor(e){super(),Ve(this,e,Dt,It,ye,{})}}const Wt="ViteApp";new Bt({target:document.getElementById(Wt)});
</script>
<div id="ViteApp"></div>